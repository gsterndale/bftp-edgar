org: gsterndale
app: bftp-edgar
service: bftp-edgar
frameworkVersion: "3"

provider:
  name: aws
  runtime: nodejs18.x
  environment:
    SF_SECURITY_TOKEN: ${env:SF_SECURITY_TOKEN}
    SF_USERNAME: ${env:SF_USERNAME}
    SF_PASSWORD: ${env:SF_PASSWORD}
    SF_URL: ${env:SF_URL}
    EDGAR_UA: ${env:EDGAR_UA}

functions:
  ciksHandler:
    handler: index.findCIKs
    events:
      - schedule: rate(30 days)

  filingsHandler:
    handler: index.findFilings
    events:
      - schedule: rate(1 day)

plugins:
  - serverless-plugin-typescript
